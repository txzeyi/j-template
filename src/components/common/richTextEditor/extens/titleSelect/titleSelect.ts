import { editorData } from "../../common/globalData"

export const H1 = '<svg viewBox="0 0 1024 1024" width="18" height="18"><path d="M708.835556 69.404444v885.191112a42.666667 42.666667 0 0 1-85.333334 0v-398.222223H160.426667v398.222223a42.666667 42.666667 0 0 1-85.333334 0V69.404444a42.666667 42.666667 0 0 1 85.333334 0v398.222223H625.777778v-398.222223a42.666667 42.666667 0 0 1 85.333333 0z m240.071111 885.191112v-244.622223a42.097778 42.097778 0 0 0-61.44-38.115555l-83.057778 40.96a42.666667 42.666667 0 0 0-19.342222 56.888889 42.097778 42.097778 0 0 0 56.888889 19.342222l21.617777-10.24v175.786667a42.666667 42.666667 0 0 0 85.333334 0z" p-id="6134"></path></svg>'
export const H2 = '<svg viewBox="0 0 1024 1024" width="18" height="18"><path d="M682.666667 69.404444v885.191112a42.666667 42.666667 0 0 1-85.333334 0v-398.222223H132.551111v398.222223a42.666667 42.666667 0 1 1-85.333333 0V69.404444a42.666667 42.666667 0 0 1 85.333333 0v398.222223h463.075556v-398.222223a42.666667 42.666667 0 0 1 85.333333 0z m295.822222 885.191112a42.666667 42.666667 0 0 0-42.666667-42.666667h-56.888889l25.031111-22.755556 10.24-9.102222a191.715556 191.715556 0 0 0 18.773334-18.204444 109.795556 109.795556 0 0 0 6.257778-143.36 103.537778 103.537778 0 0 0-132.551112-31.288889 104.675556 104.675556 0 0 0-56.888888 83.057778 42.666667 42.666667 0 0 0 39.822222 46.08 40.96 40.96 0 0 0 44.942222-38.684445 24.462222 24.462222 0 0 1 13.084444-14.791111 18.773333 18.773333 0 0 1 25.6 7.395556 25.031111 25.031111 0 0 1 0 33.564444l-13.653333 13.653333-9.102222 7.964445c-80.782222 71.111111-113.777778 107.52-94.435556 146.204444a42.666667 42.666667 0 0 0 38.684445 25.6h146.204444a43.235556 43.235556 0 0 0 35.84-42.666666z" p-id="5986"></path></svg>'
export const H3 = '<svg viewBox="0 0 1024 1024" width="18" height="18"><path d="M678.684444 69.404444v885.191112a42.666667 42.666667 0 0 1-85.333333 0v-398.222223H130.275556v398.222223a42.666667 42.666667 0 0 1-85.333334 0V69.404444a42.666667 42.666667 0 1 1 85.333334 0v398.222223h463.075555v-398.222223a42.666667 42.666667 0 0 1 85.333333 0z m175.217778 568.888889c-61.44 6.257778-97.28 32.995556-105.813333 79.075556 0 22.755556 11.377778 35.271111 30.72 36.408889a40.96 40.96 0 0 0 30.72-21.048889 50.062222 50.062222 0 0 1 44.373333-26.737778 31.857778 31.857778 0 0 1 34.702222 32.426667c0 19.342222-11.377778 31.288889-34.702222 36.408889s-34.702222 18.204444-34.702222 34.702222 12.515556 29.582222 38.684444 34.702222 40.391111 11.946667 44.373334 42.666667a46.648889 46.648889 0 0 1-46.648889 46.08 60.302222 60.302222 0 0 1-51.768889-34.702222c-10.24-15.36-19.911111-23.324444-29.013333-23.324445-23.324444 0-35.84 13.653333-38.684445 32.995556q15.36 83.057778 119.466667 88.746666c75.662222-5.12 117.191111-40.391111 123.448889-105.813333a96.142222 96.142222 0 0 0-59.733334-87.04 84.764444 84.764444 0 0 0 40.391112-75.093333A99.555556 99.555556 0 0 0 853.333333 638.862222z" p-id="6282"></path></svg>'
export const P = '<svg viewBox="0 0 1024 1024" width="18" height="18"><path d="M430.648889 120.604444v825.457778a42.666667 42.666667 0 0 1-85.333333 0V120.604444H52.337778a42.666667 42.666667 0 0 1 0-85.333333h671.288889a42.666667 42.666667 0 0 1 0 85.333333z m541.013333 402.204445h-391.964444a42.666667 42.666667 0 0 0 0 85.333333h153.6v337.92a42.666667 42.666667 0 0 0 85.333333 0v-337.92h153.031111a42.666667 42.666667 0 0 0 0-85.333333z" fill="#333333" p-id="5838"></path></svg>'
export const T = '<svg viewBox="0 0 1024 1024" p-id="4061" width="15" height="15"><path d="M786.204444 26.737778a43.235556 43.235556 0 0 0-42.666666 42.666666v398.222223H280.462222v-398.222223a42.666667 42.666667 0 0 0-85.333333 0v885.191112a42.666667 42.666667 0 0 0 85.333333 0v-398.222223h463.075556v398.222223a42.666667 42.666667 0 0 0 85.333333 0V69.404444a42.666667 42.666667 0 0 0-42.666667-42.666666z" p-id="4062"></path></svg>'

declare const window: any

export const titleSelectRegistered = function (editor: any, showCallBack: Function, wrapper: HTMLElement) {
  const key = 'titleSelect'
  editor.ui.registry.addToggleButton(key, {
    icon: key,
    tooltip: key,
    onAction: function () {
      showCallBack(editor)
    },
    onSetup: function (buttonApi: any) {
      var editorEventCallback = function (eventApi: any) {
        window.titleSelectTimer && clearTimeout(window.titleSelectTimer)
        window.titleSelectTimer = setTimeout(() => {
          if (wrapper) {
            const button = wrapper.querySelector(`button[title=${key}]`)
            if (button) {
              const div = button.querySelector('#tinyTitle')
              if (div) {
                switch (eventApi.element.nodeName) {
                  case 'H1':
                    editorData.titleValue = 'h1'
                    div.innerHTML = H1
                    break
                  case 'H2':
                    editorData.titleValue = 'h2'
                    div.innerHTML = H2
                    break
                  case 'H3':
                    editorData.titleValue = 'h3'
                    div.innerHTML = H3
                    break
                  default:
                    editorData.titleValue = 'p'
                    div.innerHTML = T
                    break
                }
              }
            }
          }
        }, 60)
        // buttonApi.setActive(true)
      };
      editor.on('NodeChange', editorEventCallback)
      return function () {
        editor.off('NodeChange', editorEventCallback)
      }
    },
  })
}
